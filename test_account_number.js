/**
 * р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡
 */

const { classifyMessage, analyzeText } = require('./services/messageProcessor');

// р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Чр╕╡р╣Ир╕бр╕╡р╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡
const testMessages = [
  "р╕гр╕▒р╕Ър╕Кр╕│р╕гр╕░р╕лр╕Щр╕╡р╣Й 98 р╕Ир╕▓р╕Бр╕Щр╕▓р╕вр╕Чр╕нр╕Зр╕вр╕зр╕Щ р╕Др╕Зр╣Ар╕Ир╕гр╕┤р╕Н р╣Ар╕ер╕Вр╕Ър╕▒р╕Нр╕Кр╕╡ 781522(BSF) р╕Ир╕│р╕Щр╕зр╕Щ 1,000 р╕Ър╕▓р╕Ч р╕Ыр╕гр╕░р╣Ар╕ар╕Ч р╕Хр╕┤р╕Фр╕Хр╕▓р╕б р╕Др╕гр╕▒р╕Ъ",
  "р╕ер╕╣р╕Бр╕лр╕Щр╕╡р╣Й р╕Щр╕▓р╕вр╕кр╕бр╕Кр╕▓р╕в р╣Гр╕Ир╕Фр╕╡ р╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡ 123456(BRR) р╕Кр╕│р╕гр╕░р╣Бр╕ер╣Йр╕з 5,000 р╕Ър╕▓р╕Ч",
  "р╕Др╕Фр╕╡р╕Щр╕▓р╕вр╕Фр╕│ р╣Гр╕Ир╕Фр╕╡ р╣Ар╕ер╕Вр╕Ър╕▒р╕Нр╕Кр╕╡ 789012(BKK) р╕Ир╕│р╕Щр╕зр╕Щ 2,500 р╕Ър╕▓р╕Ч р╕ир╕▓р╕ер╕Ир╕▒р╕Зр╕лр╕зр╕▒р╕Фр╕Бр╕гр╕╕р╕Зр╣Ар╕Чр╕Юр╕п",
  "р╕гр╕▒р╕Ър╕Кр╕│р╕гр╕░р╕лр╕Щр╕╡р╣Йр╕Ир╕▓р╕Бр╕Щр╕▓р╕вр╣Бр╕Фр╕З р╣Гр╕Ир╕Фр╕╡ р╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡ 456789(CMI) р╕Ир╕│р╕Щр╕зр╕Щ 3,000 р╕Ър╕▓р╕Ч",
  "р╕ер╕╣р╕Бр╕лр╕Щр╕╡р╣Й р╕Щр╕▓р╕Зр╕кр╕▓р╕зр╕кр╕бр╕лр╕Нр╕┤р╕З р╣Гр╕Ир╕Фр╕╡ р╣Ар╕ер╕Вр╕Ър╕▒р╕Нр╕Кр╕╡ 987654(HDY) р╕Кр╕│р╕гр╕░р╣Бр╕ер╣Йр╕з 1,500 р╕Ър╕▓р╕Ч",
  "р╕Др╕Фр╕╡р╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╕Фр╕│р╕Чр╕╡р╣И р╕Ьр╕Ъ.123/2567 р╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡ 111222(KKN) р╕Ир╕│р╕Щр╕зр╕Щ 4,000 р╕Ър╕▓р╕Ч",
  "р╕гр╕▒р╕Ър╕Кр╕│р╕гр╕░р╕лр╕Щр╕╡р╣Йр╕кр╕Цр╕▓р╕Щр╕░р╕Зр╕▓р╕Щ 00 р╕Кр╕▒р╣Йр╕Щр╕Ър╕▒р╕Зр╕Др╕▒р╕Ър╕Др╕Фр╕╡ р╣Ар╕ер╕Вр╕Ър╕▒р╕Нр╕Кр╕╡ 333444(LPT) р╕Ир╕│р╕Щр╕зр╕Щ 6,000 р╕Ър╕▓р╕Ч"
];

console.log('ЁЯПж р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╕зр╕┤р╣Ар╕Др╕гр╕▓р╕░р╕лр╣Мр╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡\n');

testMessages.forEach((message, index) => {
  console.log(`\n--- р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Чр╕╡р╣И ${index + 1} ---`);
  console.log(`р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б: "${message}"`);
  
  const messageType = classifyMessage(message);
  console.log(`р╕Ыр╕гр╕░р╣Ар╕ар╕Ч: ${messageType}`);
  
  if (messageType === 'legal_case') {
    const analysis = analyzeText(message);
    console.log(`р╕Др╕зр╕▓р╕бр╕Щр╣Ир╕▓р╣Ар╕Кр╕╖р╣Ир╕нр╕Цр╕╖р╕н: ${analysis.confidence}%`);
    console.log(`р╕Др╕│р╕кр╕│р╕Др╕▒р╕Н: ${analysis.keywords.join(', ')}`);
    
    if (analysis.court) console.log(`ЁЯПЫя╕П р╕ир╕▓р╕е: ${analysis.court}`);
    if (analysis.caseNumber) console.log(`ЁЯУЛ р╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╕Др╕Фр╕╡: ${analysis.caseNumber}`);
    if (analysis.multipleCases && analysis.multipleCases.length > 0) {
      console.log(`ЁЯУЛ р╕лр╕бр╕▓р╕вр╣Ар╕ер╕Вр╕Др╕Фр╕╡р╕лр╕ер╕▓р╕вр╕гр╕▓р╕вр╕Бр╕▓р╕г: ${analysis.multipleCases.join(', ')}`);
    }
    if (analysis.debtor) console.log(`ЁЯСд р╕ер╕╣р╕Бр╕лр╕Щр╕╡р╣Й: ${analysis.debtor}`);
    if (analysis.accountNumber) console.log(`ЁЯПж р╣Ар╕ер╕Вр╕Чр╕╡р╣Ир╕Ър╕▒р╕Нр╕Кр╕╡: ${analysis.accountNumber}`);
    if (analysis.amount) console.log(`ЁЯТ░ р╕Ир╕│р╕Щр╕зр╕Щр╣Ар╕Зр╕┤р╕Щ: ${analysis.amount}`);
    if (analysis.status) console.log(`ЁЯУК р╕кр╕Цр╕▓р╕Щр╕░: ${analysis.status}`);
    if (analysis.date) console.log(`ЁЯУЕ р╕зр╕▒р╕Щр╕Чр╕╡р╣И: ${analysis.date}`);
    if (analysis.legalTerms && analysis.legalTerms.length > 0) {
      console.log(`тЪЦя╕П р╕Др╕│р╕ир╕▒р╕Юр╕Чр╣Мр╕Чр╕▓р╕Зр╕Бр╕Ор╕лр╕бр╕▓р╕в: ${analysis.legalTerms.join(', ')}`);
    }
  }
  
  console.log('---');
});

console.log('\nтЬЕ р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ');
